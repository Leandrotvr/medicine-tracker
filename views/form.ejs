<!DOCTYPE html>
<html lang='es'>
<head>
  <meta charset='UTF-8'>
  <title><%= medicine ? 'Editar medicamento' : 'A&ntilde;adir medicamento' %></title>
  <link rel='stylesheet' href='/style.css'>
</head>
<body>
  <nav class='navbar'>
    <% if (user) { %>
      <span>Bienvenido, <%= user.username %></span>
      <a href='/'>Inicio</a>
      <a href='/add'>A&ntilde;adir medicamento</a>
      <a href='/logout'>Cerrar sesi&oacute;n</a>
    <% } else { %>
      <a href='/login'>Iniciar sesi&oacute;n</a>
      <a href='/register'>Registrarse</a>
    <% } %>
    <button id='themeToggle'>Cambiar tema</button>
  </nav>
  <div class='container' style='max-width:600px'>
    <h1><%= medicine ? 'Editar medicamento' : 'A&ntilde;adir medicamento' %></h1>
    <form method='post' action='<%= action %>'>
      <label>Nombre:
        <input type='text' name='name' required value='<%= medicine ? medicine.name : '' %>'>
      </label>
      <label>Dosis:
        <input type='text' name='dose' required value='<%= medicine ? medicine.dose : '' %>'>
      </label>
      <label>Frecuencia:
        <input type='text' name='frequency' required value='<%= medicine ? medicine.frequency : '' %>'>
      </label>
      <button type='submit' class='btn'><%= medicine ? 'Actualizar' : 'Crear' %></button>
    </form>
  </div>
  <footer>
    Aplicaci&oacute;n creada por Leandro Maciel. Desarrollada con Node.js, Express y SQLite.<br>
    Contacto: WhatsApp <a href='https://wa.me/543777416857'>+54&nbsp;3777&nbsp;416857</a> | Email <a href='mailto:leandrotvr@gmail.com'>leandrotvr@gmail.com</a>
  </footer>
  <script>
    const current = localStorage.getItem('theme');
    if (current === 'dark') document.body.classList.add('dark');
    document.getElementById('themeToggle').addEventListener('click', function() {
      document.body.classList.toggle('dark');
      if (document.body.classList.contains('dark')) {
        localStorage.setItem('theme', 'dark');
      } else {
        localStorage.setItem('theme', 'light');
      }
    });
  </script>
</body>
</html>
