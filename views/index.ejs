<!DOCTYPE html>
<html lang='es'>
<head>
  <meta charset='UTF-8'>
  <title>Mis Medicamentos</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f5f5f5; margin:0; }
    .navbar { background:#333; color:#fff; padding:1rem; }
    .navbar a { color:#fff; margin-right:1rem; text-decoration:none; }
    .container { max-width:800px; margin:2rem auto; background:#fff; padding:2rem; border-radius:8px; box-shadow:0 2px 4px rgba(0,0,0,0.1); }
    h1 { margin-top:0; }
    table { width:100%; border-collapse:collapse; margin-top:1rem; }
    th, td { border:1px solid #ddd; padding:0.5rem; text-align:left; }
    th { background:#f2f2f2; }
    .btn-danger { background:#f44336; color:#fff; border:none; padding:0.5rem 0.75rem; border-radius:4px; cursor:pointer; }
    .btn-danger:hover { background:#d7372f; }
  </style>
</head>
<body>
  <nav class='navbar'>
    <% if (user) { %>
      Bienvenido, <%= user.username %> |
      <a href='/'>Inicio</a>
      <a href='/add'>Añadir medicamento</a>
      <a href='/logout'>Cerrar sesión</a>
    <% } else { %>
      <a href='/login'>Iniciar sesión</a>
      <a href='/register'>Registrarse</a>
    <% } %>
  </nav>
  <div class='container'>
    <h1>Mis Medicamentos</h1>
    <% if (medicines.length === 0) { %>
      <p>No hay medicamentos registrados.</p>
    <% } else { %>
      <table>
        <thead>
          <tr>
            <th>Nombre</th>
            <th>Dosis</th>
            <th>Frecuencia</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <% medicines.forEach(med => { %>
            <tr>
              <td><%= med.name %></td>
              <td><%= med.dose %></td>
              <td><%= med.frequency %></td>
              <td>
                <a href='/edit/<%= med.id %>'>Editar</a>
                <form action='/delete/<%= med.id %>' method='post' style='display:inline'>
                  <button class='btn-danger' type='submit' onclick=\"return confirm('¿Eliminar?')\">Eliminar</button>
                </form>
              </td>
            </tr>
          <% }); %>
        </tbody>
      </table>
    <% } %>
  </div>
</body>
</html>
